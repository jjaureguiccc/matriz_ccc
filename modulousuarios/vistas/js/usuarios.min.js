function mostrarContrasena(){var a=$("input[name=nuevoPassword]").prop("type"),r=$("input[name=editarPassword]").prop("type");"password"==a||"password"==r?($("a.inputPassword > i").removeClass("fas fa-eye-slash").addClass("fa fa-eye"),$("input[name=nuevoPassword]").prop("type","text"),$("input[name=editarPassword]").prop("type","text"),$("a.inputPassword").prop("title","Ocultar contraseña")):($("a.inputPassword > i").removeClass("fas fa-eye").addClass("fas fa-eye-slash"),$("input[name=nuevoPassword]").prop("type","password"),$("input[name=editarPassword]").prop("type","password"),$("a.inputPassword").prop("title","Mostrar contraseña"))}function validarUsuario(){var a=$("input[name=restablecerPassword]").val();$.post("ajax/usuarios.ajax.php",{usuario:a},function(a,r,t){"false"===a?($("button.btnRestablecer").attr("disabled",!0),Swal.fire({title:"Usuario No Existe",text:"¡El usuario actualmente no existe en la base de datos!",icon:"warning",confirmButtonColor:"#3085d6",allowOutsideClick:!1,confirmButtonText:"Cerrar"}).then(a=>{a.value&&($("input[name=restablecerPassword]").val(""),$("button.btnRestablecer").attr("disabled",!1))})):"inactived"===a&&Swal.fire({title:"Usuario Inactivo",text:"¡El usuario actualmente se encuentra inactivo!",icon:"warning",confirmButtonColor:"#3085d6",allowOutsideClick:!1,confirmButtonText:"Cerrar"}).then(a=>{a.value&&$("input[name=restablecerPassword]").val("")})},"json")}function validarContrasena(a,r){var t=$("input[name=password1]").val(),s=$("input[name=password2]").val();"password1"==r?a!=s?($("input[name=password2]").addClass("is-invalid"),$("input[name=password1]").addClass("is-invalid"),$(".validarBtn").attr("disabled",!0)):($("input[name=password2]").removeClass("is-invalid"),$("input[name=password1]").removeClass("is-invalid"),$("input[name=password2]").addClass("is-valid"),$("input[name=password1]").addClass("is-valid"),$(".validarBtn").attr("disabled",!1)):"password2"==r&&(a!=t?($("input[name=password2]").addClass("is-invalid"),$("input[name=password1]").addClass("is-invalid"),$(".validarBtn").attr("disabled",!0)):($("input[name=password2]").removeClass("is-invalid"),$("input[name=password1]").removeClass("is-invalid"),$("input[name=password2]").addClass("is-valid"),$("input[name=password1]").addClass("is-valid"),$(".validarBtn").attr("disabled",!1)))}function valorBarra(a,r){var t=a.length;"password1"===r?0!=t&&t<5?($(".barra1").css({width:8.325*t+"%"}),$(".barra1").attr("aria-valuenow",8.325*t),$(".barra2").css({width:"0%"})):t>4&&t<9?($(".barra2").css({width:8.325*(t-4)+"%"}),$(".barra2").attr("aria-valuenow",8.325*(t-4)),$(".barra3").css({width:"0%"})):t>8&&t<15?($(".barra3").css({width:8.325*(t-8)+"%"}),$(".barra3").attr("aria-valuenow",8.325*(t-8))):0==t&&($(".barra1").css({width:"0%"}),$(".barra1").attr("aria-valuenow","0"),$(".barra2").css({width:"0%"}),$(".barra2").attr("aria-valuenow","0"),$(".barra3").css({width:"0%"}),$(".barra3").attr("aria-valuenow","0")):"password2"===r&&(0!=t&&t<5?($(".barra4").css({width:8.325*t+"%"}),$(".barra4").attr("aria-valuenow",8.325*t),$(".barra5").css({width:"0%"})):t>4&&t<9?($(".barra5").css({width:8.325*(t-4)+"%"}),$(".barra5").attr("aria-valuenow",8.325*(t-4)),$(".barra6").css({width:"0%"})):t>8&&t<15?($(".barra6").css({width:8.325*(t-8)+"%"}),$(".barra6").attr("aria-valuenow",8.325*(t-8))):0==t&&($(".barra4").css({width:"0%"}),$(".barra4").attr("aria-valuenow","0"),$(".barra5").css({width:"0%"}),$(".barra5").attr("aria-valuenow","0"),$(".barra6").css({width:"0%"}),$(".barra6").attr("aria-valuenow","0")))}$(".tableUsuarios").DataTable({ajax:"ajax/usuarios.ajax.php"}),$(document).on("click",".btnEditarUsuario",function(){var a=$(this).attr("idUsuario"),r=new FormData;r.append("idUsuarioEditar",a),$.ajax({url:"ajax/usuarios.ajax.php",method:"POST",data:r,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("input[name=editarNombre]").val(a.nombre_user),$("input[name=editarCargo]").val(a.cargo_user),$("input[name=editarCorreo]").val(a.correo_user),$("input[name=editarUsuario]").val(a.usuario_user),$("input[name=passwordActual]").val(a.password_user),$("select[name=editarGerencia]").val(a.id_gerencia_user),$("select[name=editarPerfil]").val(a.tipo_usuario_user)}})}),$(document).on("click",".btnEliminarUsuario",function(){var a=$(this).attr("idborrar");Swal.fire({title:"¿Está seguro de eliminar el usuario?",text:"¡Si no lo está puede cancelar la accíón!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"Cancelar",confirmButtonText:"Si, eliminar usuario!",allowOutsideClick:!1}).then(r=>{r.value&&$.post("ajax/usuarios.ajax.php",{idBorrar:a},function(a,r,t){"ok"!=a?Swal.fire({title:"Error!!",text:"¡Se presento un error al eliminar el usuario!",icon:"error",showConfirmButton:!1,timer:3e3}):(Swal.fire({title:"Eliminado!!",text:"¡El usuario Se ha eliminado Correctamente!",icon:"success",showConfirmButton:!1,timer:1500}),setTimeout(function(){location.reload()},1500))})})}),$(document).on("click",".btnActivar",function(){var a=$(this).attr("idUsuario"),r=$(this).attr("estadoUsuario"),t=new FormData;t.append("activarId",a),t.append("activarUsuario",r),$.ajax({url:"ajax/usuarios.ajax.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){window.matchMedia("(max-width:767px)").matches&&Swal.fire({title:"¡El usuario ha sido actualizado!",type:"success",confirmButtonColor:"#3085d6",allowOutsideClick:!1,confirmButtonText:"Cerrar"}).then(a=>{a.value&&(window.location="user")})}}),0==r?($(this).removeClass("btn-success"),$(this).addClass("btn-danger"),$(this).html("Desactivado"),$(this).attr("estadoUsuario",1)):($(this).addClass("btn-success"),$(this).removeClass("btn-danger"),$(this).html("Activado"),$(this).attr("estadoUsuario",0))});